(()=>{"use strict";function e(e,t){if(""!==t){var n=JSON.parse(localStorage.getItem(t));n=n.filter((function(t){return t.reference!==e})),localStorage.setItem("".concat(t),JSON.stringify(n))}}function t(){localStorage.getItem("added-tasks")&&JSON.parse(localStorage.getItem("added-tasks")).forEach((function(e){m(e)}))}function n(t){var n=t.currentTarget.parentNode.parentNode.parentNode.parentNode,a=JSON.parse(localStorage.getItem("".concat(n.id)));e(a.reference,a.label),localStorage.removeItem("".concat(n.id));var o=JSON.parse(localStorage.getItem("added-tasks"));if(0==(o=o.filter((function(e){return e.reference!==a.reference}))).length){localStorage.removeItem("amount-tasks");var c=document.createElement("p");c.textContent="No tasks yet",document.querySelector("#added-tasks").append(c)}localStorage.setItem("added-tasks",JSON.stringify(o)),n.childNodes.forEach((function(e){return e.remove()})),n.remove()}function a(e,t,n){if(""!==e){var a=JSON.parse(localStorage.getItem(e));a=a.map((function(e){return e.reference==t?(e.select=n,e):e})),localStorage.setItem(e,JSON.stringify(a))}}function o(e){var t=document.querySelector("#bg-modal-edit"),n=document.querySelector("#modal-edit-task");t.style.display="flex",n.style.display="block";var a=e.currentTarget.parentNode.parentNode.parentNode.parentNode,o=document.querySelector("#task-content > input");return o.className="".concat(a.id),o.value=document.querySelector("#".concat(a.id," > .content > p")).textContent,a}function c(e){document.querySelectorAll(".color").forEach((function(e){e.classList.remove("selected-color")})),e.currentTarget.classList.add("selected-color")}function r(){document.querySelector("#bg-modal-edit").style.display="none"}var l={pink:"#e91e63",pourple:"#9c27b0",green:"#30ae45","dark-blue":"#3f51b5"};function s(e,t,n){var a=JSON.parse(localStorage.getItem(n));if(null!==a){var o=a.find((function(e){return e.reference===t}));null!==o&&(o.content=e.content,o.label=e.label,o.color=l[e.color]),localStorage.setItem(n,JSON.stringify(a))}}function d(e,t){if(localStorage.getItem(e)){var n=JSON.parse(localStorage.getItem(e));n.find((function(e){return e.reference===t.reference}))||n.push(t),localStorage.setItem(e,JSON.stringify(n))}}function u(e){var t=document.createElement("div");return t.className=null!=e?e:"",t}function i(e,t){var n=document.createElement("img");return n.src=e,n.addEventListener("click",t),n}function m(e){var t=e.content,c=e.select,r=e.label,l=e.reference,s=e.color,d=document.querySelector("#added-tasks"),m=document.querySelector("#added-tasks > p");m&&d.removeChild(m);var S=u("new-note");S.id=l;var f=function(e,t){var a=document.createElement("header");a.style.backgroundColor=e;var c=document.createElement("label");c.textContent=t;var r=u("icons"),l=u("label-edit edit-option"),s=i("../icon/pincel.png");s.addEventListener("click",o),l.append(s);var d=u("trash-note edit-option"),m=i("../icon/trash.png",n);return d.append(m),r.append(l,d),a.append(c,r),a}(s,r),p=u("content"),g=document.createElement("p");c&&g.classList.add("completed-task"),g.innerText=t;var y=function(e,t,n,o){var c=document.createElement("input");return c.type="checkbox",e&&(c.checked="true"),function(e,t,n,o){e.addEventListener("change",(function(){var c=JSON.parse(localStorage.getItem("".concat(t)));e.checked?(o.classList.add("completed-task"),e.checked=!0,c.select=!0,a(n,t,!0),a("added-tasks",t,!0)):(e.checked=!1,c.select=!1,a("added-tasks",t,!1),o.classList.remove("completed-task")),localStorage.setItem("".concat(t),JSON.stringify(c))}))}(c,n,t,o),c}(c,r,l,g);p.append(y,g),S.append(f,p),d.append(S)}function S(e){var t=document.querySelector("#options"),n=document.createElement("option");n.value=e,n.textContent=e,t.append(n)}function f(e){var t=document.createElement("div");t.className="new-label";var n=document.createElement("p");return t.addEventListener("click",(function(){!function(e){if(p(),e.classList.add("selected-label"),localStorage.getItem("added-tasks")){var t=JSON.parse(localStorage.getItem("added-tasks"));t.some((function(t){return t.label===e.textContent}))?(g(),t.forEach((function(t){t.label===e.textContent&&m(t)}))):document.querySelector("#added-tasks").textContent="No tasks yet"}else document.querySelector("#added-tasks").textContent="No tasks yet"}(t)})),n.textContent=e,t.append(n),e="",t}function p(){document.querySelectorAll(".new-label").forEach((function(e){e.classList.remove("selected-label")}))}function g(){document.querySelector("#added-tasks").innerText=""}document.querySelector("#add-task").addEventListener("click",(function(){var e=document.querySelector("#task-input"),t={content:e.value,label:"",select:!1,color:"#9c27b0"};!function(e){if(localStorage.getItem("amount-tasks")){var t=Number(JSON.parse(localStorage.getItem("amount-tasks")));t++,e.reference="task-".concat(t),localStorage.setItem("amount-tasks",JSON.stringify(t))}else e.reference="task-".concat(1),localStorage.setItem("amount-tasks",JSON.stringify(1))}(t);var n=document.querySelector(".selected-label > p").textContent;if("All"!=n){t.label=n,d(n,t);var a=document.querySelector("#added-tasks");"No tasks yet"===a.textContent&&(a.textContent="")}m(t),function(e){if(localStorage.getItem(e.reference))JSON.parse(localStorage.getItem("".concat(e.reference)));else if(localStorage.setItem(e.reference,JSON.stringify(e)),localStorage.getItem("added-tasks")){var t=JSON.parse(localStorage.getItem("added-tasks"));t.push(e),localStorage.setItem("added-tasks",JSON.stringify(t))}else{var n=[];n.push(e),localStorage.setItem("added-tasks",JSON.stringify(n))}}(t),e.value=""})),window.addEventListener("load",t),window.addEventListener("load",(function(){if(localStorage.getItem("Labels")){var e=document.querySelector("#labels");JSON.parse(localStorage.getItem("Labels")).forEach((function(t){e.append(f(t)),S(t)}))}})),document.querySelector("#plus-label").addEventListener("click",(function(){document.querySelector("#new-label").style.display="flex",document.querySelector("#plus-label").style.display="none"})),document.querySelector("#new-label > img").addEventListener("click",(function(){var e,t=document.querySelector("#new-label-input").value,n=document.querySelector("#labels"),a=f(t);(function(e){localStorage.setItem(e,JSON.stringify([])),function(e){if(localStorage.getItem("Labels")){var t=JSON.parse(localStorage.getItem("Labels"));t.push(e),localStorage.setItem("Labels",JSON.stringify(t))}else{var n=[];n.push(e),localStorage.setItem("Labels",JSON.stringify(n))}}(e)})(t),S(t),n.append(a),document.querySelector("#new-label-input").value="",e=document.querySelector("#plus-label"),document.querySelector("#new-label").style.display="none",e.style.display="block"})),document.querySelector("#new-label > button").addEventListener("click",(function(){var e=document.querySelector("#new-label"),t=document.querySelector("#plus-label");e.style.display="none",t.style.display="block"})),document.querySelectorAll(".color").forEach((function(e){return e.addEventListener("click",c)})),document.querySelector("#discard-changes-btn").addEventListener("click",r),document.querySelector("#save-changes-btn").addEventListener("click",(function(){!function(t){var n,a,o,c=(a=null!==(n=document.querySelector("#options").value)&&void 0!==n?n:"",o=l["dark-blue"],document.querySelector(".selected-color")&&(o=document.querySelector(".selected-color").id),{label:a,color:o,content:document.querySelector("#task-content > input").value});s(c,t,"added-tasks");var u=JSON.parse(localStorage.getItem(t)),i=u.label;i!==c.label&&""!==c&&""!==i&&e(u.reference,i),u.content=c.content,u.color=l[c.color],u.label=c.label,localStorage.setItem(t,JSON.stringify(u)),d(c.label,u),s(c,t,c.label),document.querySelector("#".concat(t," > header")).style.backgroundColor=l[c.color],document.querySelector("#".concat(t," > header > label")).textContent=c.label,document.querySelector("#".concat(t," > .content > p")).textContent=c.content,document.querySelector("#task-content > input").classList.remove(t),r()}(document.querySelector("#task-content > input").classList.value)})),document.querySelector("#all-notes").addEventListener("click",(function(e){p(),e.currentTarget.classList.add("selected-label"),g(),t()}))})();