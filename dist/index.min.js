(()=>{"use strict";function e(e,t){if(""!==t){var n=JSON.parse(localStorage.getItem(t));n=n.filter((function(t){return t.reference!==e})),localStorage.setItem("".concat(t),JSON.stringify(n))}}function t(){localStorage.getItem("added-tasks")&&JSON.parse(localStorage.getItem("added-tasks")).forEach((function(e){i(e)}))}function n(t){var n=t.currentTarget.parentNode.parentNode.parentNode.parentNode,o=JSON.parse(localStorage.getItem("".concat(n.id)));e(o.reference,o.label),localStorage.removeItem("".concat(n.id));var a=JSON.parse(localStorage.getItem("added-tasks"));if(0==(a=a.filter((function(e){return e.reference!==o.reference}))).length){localStorage.removeItem("amount-tasks");var c=document.createElement("p");c.textContent="No tasks yet",document.querySelector("#added-tasks").append(c)}localStorage.setItem("added-tasks",JSON.stringify(a)),n.childNodes.forEach((function(e){return e.remove()})),n.remove()}function o(e,t,n){if(""!==e){var o=JSON.parse(localStorage.getItem(e));o=o.map((function(e){return e.reference==t?(e.select=n,e):e})),localStorage.setItem(e,JSON.stringify(o))}}function a(e){document.querySelector("#bg-modal-edit").style.display="flex";var t=e.currentTarget.parentNode.parentNode.parentNode.parentNode,n=document.querySelector("#task-content > input");return n.className="".concat(t.id),n.value=document.querySelector("#".concat(t.id," > .content > p")).textContent,t}function c(e){document.querySelectorAll(".color").forEach((function(e){e.classList.remove("selected-color")})),e.currentTarget.classList.add("selected-color")}function r(){document.querySelector("#bg-modal-edit").style.display="none"}var l={pink:"#e91e63",pourple:"#9c27b0",green:"#30ae45","dark-blue":"#3f51b5"};function s(e,t,n){console.log("modify: ".concat(t,", ").concat(n));var o=JSON.parse(localStorage.getItem(n));if(null!==o){var a=o.find((function(e){return e.reference===t}));null!==a&&(a.content=e.content,a.label=e.label,a.color=l[e.color]),localStorage.setItem(n,JSON.stringify(o))}}function d(e){var t=document.createElement("div");return t.className=null!=e?e:"",t}function u(e,t){var n=document.createElement("img");return n.src=e,n.addEventListener("click",t),n}function i(e){var t=e.content,c=e.select,r=e.label,l=e.reference,s=e.color,i=(document.querySelector("main"),document.querySelector("#added-tasks")),m=document.querySelector("#added-tasks > p");m&&i.removeChild(m);var S=d("new-note");S.id=l;var f=function(e,t){var o=document.createElement("header");o.style.backgroundColor=e;var c=document.createElement("label");c.textContent=t;var r=d("icons"),l=d("label-edit edit-option"),s=u("../icon/pincel.png");s.addEventListener("click",a),l.append(s);var i=d("trash-note edit-option"),m=u("../icon/trash.png",n);return i.append(m),r.append(l,i),o.append(c,r),o}(s,r),g=d("content"),p=document.createElement("p");c&&p.classList.add("completed-task"),p.innerText=t;var y=function(e,t,n,a){var c=document.createElement("input");return c.type="checkbox",e&&(c.checked="true"),function(e,t,n,a){e.addEventListener("change",(function(){var c=JSON.parse(localStorage.getItem("".concat(t)));e.checked?(a.classList.add("completed-task"),e.checked=!0,c.select=!0,o(n,t,!0),o("added-tasks",t,!0)):(e.checked=!1,c.select=!1,o("added-tasks",t,!1),a.classList.remove("completed-task")),localStorage.setItem("".concat(t),JSON.stringify(c))}))}(c,n,t,a),c}(c,r,l,p);g.append(y,p),S.append(f,g),i.append(S)}function m(e){var t=document.querySelector("#options"),n=document.createElement("option");n.value=e,n.textContent=e,t.append(n)}function S(e){var t=document.createElement("div");t.className="new-label";var n=document.createElement("p");return t.addEventListener("click",(function(){!function(e){f(),e.classList.add("selected-label"),g();var t=JSON.parse(localStorage.getItem("added-tasks"));t.some((function(t){return t.label===e.textContent}))?t.forEach((function(t){t.label===e.textContent&&i(t)})):document.querySelector("#added-tasks").innerText="No tasks yet"}(t)})),n.textContent=e,t.append(n),e="",t}function f(){document.querySelectorAll(".new-label").forEach((function(e){e.classList.remove("selected-label")}))}function g(){document.querySelector("#added-tasks").innerText=""}document.querySelector("#add-task").addEventListener("click",(function(){var e=document.querySelector("#task-input"),t={content:e.value,label:"",select:!1,color:"#9c27b0"};i(function(e){if(localStorage.getItem("amount-tasks")){var t=Number(JSON.parse(localStorage.getItem("amount-tasks")));t++,e.reference="task-".concat(t),localStorage.setItem("amount-tasks",JSON.stringify(t))}else e.reference="task-".concat(1),localStorage.setItem("amount-tasks",JSON.stringify(1));return e}(t)),function(e){if(localStorage.getItem(e.reference))JSON.parse(localStorage.getItem("".concat(e.reference)));else if(localStorage.setItem(e.reference,JSON.stringify(e)),localStorage.getItem("added-tasks")){var t=JSON.parse(localStorage.getItem("added-tasks"));t.push(e),localStorage.setItem("added-tasks",JSON.stringify(t))}else{var n=[];n.push(e),localStorage.setItem("added-tasks",JSON.stringify(n))}}(t),e.value=""})),window.addEventListener("load",t),window.addEventListener("load",(function(){if(localStorage.getItem("Labels")){var e=document.querySelector("#labels");JSON.parse(localStorage.getItem("Labels")).forEach((function(t){e.append(S(t)),m(t)}))}})),document.querySelector("#plus-label").addEventListener("click",(function(){document.querySelector("#new-label").style.display="flex",document.querySelector("#plus-label").style.display="none"})),document.querySelector("#new-label > img").addEventListener("click",(function(){var e,t=document.querySelector("#new-label-input").value,n=document.querySelector("#labels"),o=S(t);(function(e){console.log(e),localStorage.setItem(e,JSON.stringify([])),function(e){if(localStorage.getItem("Labels")){var t=JSON.parse(localStorage.getItem("Labels"));t.push(e),localStorage.setItem("Labels",JSON.stringify(t))}else{var n=[];n.push(e),localStorage.setItem("Labels",JSON.stringify(n))}}(e)})(t),m(t),n.append(o),document.querySelector("#new-label-input").value="",e=document.querySelector("#plus-label"),document.querySelector("#new-label").style.display="none",e.style.display="block"})),document.querySelector("#new-label > button").addEventListener("click",(function(){var e=document.querySelector("#new-label"),t=document.querySelector("#plus-label");e.style.display="none",t.style.display="block"})),document.querySelectorAll(".color").forEach((function(e){return e.addEventListener("click",c)})),document.querySelector("#discard-changes-btn").addEventListener("click",r),document.querySelector("#save-changes-btn").addEventListener("click",(function(){!function(t){var n,o,a,c=(o=null!==(n=document.querySelector("#options").value)&&void 0!==n?n:"",a=l["dark-blue"],document.querySelector(".selected-color")&&(a=document.querySelector(".selected-color").id),{label:o,color:a,content:document.querySelector("#task-content > input").value});s(c,t,"added-tasks");var d=JSON.parse(localStorage.getItem(t)),u=d.label;u!==c.label&&""!==c&&""!==u&&e(d.reference,u),d.content=c.content,d.color=l[c.color],d.label=c.label,localStorage.setItem(t,JSON.stringify(d)),function(e,t){if(localStorage.getItem(e)){var n=JSON.parse(localStorage.getItem(e));n.find((function(e){return e.reference===t.reference}))||n.push(t),localStorage.setItem(e,JSON.stringify(n))}}(c.label,d),s(c,t,c.label),document.querySelector("#".concat(t," > header")).style.backgroundColor=l[c.color],document.querySelector("#".concat(t," > header > label")).textContent=c.label,document.querySelector("#".concat(t," > .content > p")).textContent=c.content,document.querySelector("#task-content > input").classList.remove(t),r()}(document.querySelector("#task-content > input").classList.value)})),document.querySelector("#all-notes").addEventListener("click",(function(e){f(),e.currentTarget.classList.add("selected-label"),g(),t()}))})();